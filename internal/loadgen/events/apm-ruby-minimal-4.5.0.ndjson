{"metadata":{"service":{"name":"opbeans-ruby","environment":"production","version":"None","agent":{"name":"ruby","version":"4.5.0"},"framework":{"name":"Ruby on Rails","version":"6.1.4.1"},"language":{"name":"ruby","version":"2.7.3"},"runtime":{"name":"ruby","version":"2.7.3"}},"process":{"pid":39,"title":"bin/rails","argv":["db:seed"]},"system":{"configured_hostname":null,"architecture":"x86_64","platform":"linux","kubernetes":{"namespace":null,"node":{"name":null},"pod":{"name":null,"uid":null}},"container":null,"detected_hostname":"19887b56414b"},"labels":null}}
{"metricset":{"timestamp":1646055440793569,"samples":{"system.cpu.total.norm.pct":{"value":1.0},"system.memory.actual.free":{"value":8318488576},"system.memory.total":{"value":12544401408},"system.process.cpu.total.norm.pct":{"value":0.0},"system.process.memory.size":{"value":0},"system.process.memory.rss.bytes":{"value":0}}}}
{"metricset":{"timestamp":1646055440801536,"samples":{"ruby.gc.count":{"value":50},"ruby.threads":{"value":9},"ruby.heap.slots.live":{"value":231609},"ruby.heap.slots.free":{"value":1135},"ruby.heap.allocations.total":{"value":1030866}}}}
{"metricset":{"timestamp":1646055453515456,"samples":{"system.cpu.total.norm.pct":{"value":0.875},"system.memory.actual.free":{"value":7698362368},"system.memory.total":{"value":12544401408},"system.process.cpu.total.norm.pct":{"value":0.0},"system.process.memory.size":{"value":0},"system.process.memory.rss.bytes":{"value":0}}}}
{"metricset":{"timestamp":1646055453521022,"samples":{"ruby.gc.count":{"value":35},"ruby.threads":{"value":10},"ruby.heap.slots.live":{"value":215828},"ruby.heap.slots.free":{"value":205},"ruby.heap.allocations.total":{"value":590996}}}}
{"metricset":{"timestamp":1646055494028059,"samples":{"system.cpu.total.norm.pct":{"value":0.8936170212765957},"system.memory.actual.free":{"value":7845728256},"system.memory.total":{"value":12544401408},"system.process.cpu.total.norm.pct":{"value":0.0},"system.process.memory.size":{"value":0},"system.process.memory.rss.bytes":{"value":0}}}}
{"span":{"id":"3d7e4f8e40329e48","transaction_id":"9fd27dad043435a5","parent_id":"83b4f87483639b59","name":"text template","type":"template.view","duration":0.432,"context":{},"stacktrace":[],"timestamp":1646055505135329,"trace_id":"67e51b5e70387ed8269d4bfcb7ed5c80","sample_rate":1.0,"outcome":null}}
{"metricset":{"timestamp":1646055494031798,"samples":{"ruby.gc.count":{"value":39},"ruby.threads":{"value":9},"ruby.heap.slots.live":{"value":213108},"ruby.heap.slots.free":{"value":1698},"ruby.heap.allocations.total":{"value":628374}}}}
{"span":{"id":"83b4f87483639b59","transaction_id":"9fd27dad043435a5","parent_id":"9fd27dad043435a5","name":"ApplicationController#index","type":"app.controller.action","duration":33.41,"context":{},"stacktrace":[],"timestamp":1646055505119331,"trace_id":"67e51b5e70387ed8269d4bfcb7ed5c80","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"9fd27dad043435a5","trace_id":"67e51b5e70387ed8269d4bfcb7ed5c80","parent_id":"f7c2980a488adaee","name":"ApplicationController#index","type":"request","result":"HTTP 2xx","outcome":"success","duration":161.023,"timestamp":1646055505004791,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/","REQUEST_URI":"/","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/","REMOTE_ADDR":"172.23.0.12","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Host":"opbeans-ruby:3000","User-Agent":"Wget","Connection":"close"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.12"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/","hostname":"opbeans-ruby","port":"3000","pathname":"/","search":"","hash":null}},"response":{"status_code":200,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"text/html; charset=utf-8","ETag":"W/\"49b8d991b80d15caa865a713fcd1f60d\"","Cache-Control":"max-age=0, private, must-revalidate","X-Request-Id":"da451b51-14f6-4905-9dae-651d8bd3fcef","X-Runtime":"0.076898"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":2,"dropped":0}}}
{"span":{"id":"82c54e39ad4d938a","transaction_id":"7e361370737fd94e","parent_id":"7e361370737fd94e","name":"GET opbeans-python","type":"external.http","duration":147.154,"context":{"http":{"url":"http://opbeans-python:3000/api/orders/433","status_code":200,"method":"GET"},"destination":{"address":"opbeans-python","port":3000,"service":{"name":"","type":"","resource":"opbeans-python:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055507535261,"trace_id":"da61307e05a5d4195773fc273985b73a","sample_rate":1.0,"outcome":"success"}}
{"span":{"id":"6bcbb9ff32a8d9e9","transaction_id":"12a2dffc84b54949","parent_id":"6835658a85b06f89","name":"SELECT FROM customers","type":"db.postgresql.sql","duration":3.056,"context":{"db":{"instance":null,"statement":"SELECT DISTINCT \"customers\".* FROM \"customers\" INNER JOIN \"orders\" ON \"customers\".\"id\" = \"orders\".\"customer_id\" INNER JOIN \"order_lines\" ON \"orders\".\"id\" = \"order_lines\".\"order_id\" WHERE \"order_lines\".\"product_id\" = $1","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055508639051,"trace_id":"25259e2cc304aab0834bdfc246f70978","sample_rate":1.0,"outcome":null}}
{"span":{"id":"6835658a85b06f89","transaction_id":"12a2dffc84b54949","parent_id":"12a2dffc84b54949","name":"Api::CustomersController#index","type":"app.controller.action","duration":243.714,"context":{},"stacktrace":[],"timestamp":1646055508443944,"trace_id":"25259e2cc304aab0834bdfc246f70978","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"12a2dffc84b54949","trace_id":"25259e2cc304aab0834bdfc246f70978","parent_id":"267ee0c5b7dec5bb","name":"Api::CustomersController#index","type":"request","result":"HTTP 2xx","outcome":"success","duration":252.474,"timestamp":1646055508436991,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/products/1/customers","REQUEST_URI":"/api/products/1/customers","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/products/1/customers","REMOTE_ADDR":"172.23.0.12","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/products/1/customers","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Connection":"close","Host":"opbeans-ruby:3000","User-Agent":"http.rb/5.0.4","Traceparent":"00-25259e2cc304aab0834bdfc246f70978-267ee0c5b7dec5bb-01","Tracestate":"es=s:1.0","Elastic-Apm-Traceparent":"00-25259e2cc304aab0834bdfc246f70978-267ee0c5b7dec5bb-01"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.12"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/products/1/customers","hostname":"opbeans-ruby","port":"3000","pathname":"/api/products/1/customers","search":"","hash":null}},"response":{"status_code":200,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"application/json; charset=utf-8","ETag":"W/\"e4763b7c6f912f9b655fa667d293bf0c\"","Cache-Control":"max-age=0, private, must-revalidate","X-Request-Id":"aff2150a-9527-4321-82f5-bb46751e4554","X-Runtime":"0.249966"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":3,"dropped":0}}}
{"span":{"id":"267ee0c5b7dec5bb","transaction_id":"aa556c0a4992afc6","parent_id":"aa556c0a4992afc6","name":"GET opbeans-ruby","type":"external.http","duration":262.776,"context":{"http":{"url":"http://opbeans-ruby:3000/api/products/1/customers","status_code":200,"method":"GET"},"destination":{"address":"opbeans-ruby","port":3000,"service":{"name":"","type":"","resource":"opbeans-ruby:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055508432986,"trace_id":"25259e2cc304aab0834bdfc246f70978","sample_rate":1.0,"outcome":"success"}}
{"span":{"id":"9288fa932ac66528","transaction_id":"d6636891f42b34e1","parent_id":"d41974b6c69d5a83","name":"SELECT FROM customers","type":"db.postgresql.sql","duration":0.944,"context":{"db":{"instance":null,"statement":"SELECT \"customers\".* FROM \"customers\" WHERE \"customers\".\"id\" IN ($1, $2, $3, $4, $5)","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055512552366,"trace_id":"eba3ee72ce4bbd5431439af9f4057934","sample_rate":1.0,"outcome":null}}
{"span":{"id":"5ba00c6e3486de52","transaction_id":"b264feba75a3e222","parent_id":"b264feba75a3e222","name":"GET opbeans-go","type":"external.http","duration":29.405,"context":{"http":{"url":"http://opbeans-go:3000/api/orders/182","status_code":200,"method":"GET"},"destination":{"address":"opbeans-go","port":3000,"service":{"name":"","type":"","resource":"opbeans-go:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055512952325,"trace_id":"ff835dd40e830476499e465971e9f3b4","sample_rate":1.0,"outcome":"success"}}
{"transaction":{"id":"b264feba75a3e222","trace_id":"ff835dd40e830476499e465971e9f3b4","parent_id":"ebb5d55e254f64ef","name":"Rack","type":"request","result":"HTTP 2xx","outcome":"success","duration":37.204,"timestamp":1646055512945272,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/orders/182","REQUEST_URI":"/api/orders/182","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/orders/182","REMOTE_ADDR":"172.23.0.10","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/orders/182","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Traceparent":"00-ff835dd40e830476499e465971e9f3b4-ebb5d55e254f64ef-01","Tracestate":"es=s:1","Elastic-Apm-Traceparent":"00-ff835dd40e830476499e465971e9f3b4-ebb5d55e254f64ef-01","Host":"opbeans-ruby:3000","Connection":"close"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.10"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/orders/182","hostname":"opbeans-ruby","port":"3000","pathname":"/api/orders/182","search":"","hash":null}},"response":{"status_code":200,"headers":{"Content-Type":"application/json"},"headers_sent":true,"finished":true},"user":null,"service":null},"span_count":{"started":1,"dropped":0}}}
{"span":{"id":"ded948fd40e7859b","transaction_id":"1938fbbd9bbd7690","parent_id":"0094c0c25ad67be6","name":"SELECT FROM orders","type":"db.postgresql.sql","duration":0.861,"context":{"db":{"instance":null,"statement":"SELECT \"orders\".* FROM \"orders\"","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055513567828,"trace_id":"d2feb0acd3f1324f00f7766af253d7d4","sample_rate":1.0,"outcome":null}}
{"span":{"id":"0094c0c25ad67be6","transaction_id":"1938fbbd9bbd7690","parent_id":"1938fbbd9bbd7690","name":"Api::OrdersController#index","type":"app.controller.action","duration":62.992,"context":{},"stacktrace":[],"timestamp":1646055513563419,"trace_id":"d2feb0acd3f1324f00f7766af253d7d4","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"41267f69f3f91782","trace_id":"11374722481eb2c95335ebb8f75715b7","parent_id":"5e804db250fd64a7","name":"Rack","type":"request","result":"HTTP 2xx","outcome":"success","duration":60.382,"timestamp":1646055513740492,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/types","REQUEST_URI":"/api/types","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/types","REMOTE_ADDR":"172.23.0.11","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/types","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Host":"opbeans-ruby:3000","User-Agent":"python-requests/2.27.1","Accept-Encoding":"gzip, deflate","Accept":"*/*","Connection":"keep-alive","Traceparent":"00-11374722481eb2c95335ebb8f75715b7-5e804db250fd64a7-01","Elastic-Apm-Traceparent":"00-11374722481eb2c95335ebb8f75715b7-5e804db250fd64a7-01","Tracestate":"es=s:1"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.11"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/types","hostname":"opbeans-ruby","port":"3000","pathname":"/api/types","search":"","hash":null}},"response":{"status_code":200,"headers":{"Content-Type":"application/json; charset=utf-8"},"headers_sent":true,"finished":true},"user":null,"service":null},"span_count":{"started":1,"dropped":0}}}
{"span":{"id":"e6f3ca6960bfaaf2","transaction_id":"958f704720e73cfb","parent_id":"4bcdcc78f93d101a","name":"SELECT FROM customers","type":"db.postgresql.sql","duration":0.615,"context":{"db":{"instance":null,"statement":"SELECT \"customers\".* FROM \"customers\"","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055513914721,"trace_id":"347c2fc56ceae505f921be9e44e0a2c3","sample_rate":1.0,"outcome":null}}
{"span":{"id":"4bcdcc78f93d101a","transaction_id":"958f704720e73cfb","parent_id":"958f704720e73cfb","name":"Api::CustomersController#index","type":"app.controller.action","duration":13.47,"context":{},"stacktrace":[],"timestamp":1646055513911470,"trace_id":"347c2fc56ceae505f921be9e44e0a2c3","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"958f704720e73cfb","trace_id":"347c2fc56ceae505f921be9e44e0a2c3","parent_id":"bb4628a125de68cc","name":"Api::CustomersController#index","type":"request","result":"HTTP 2xx","outcome":"success","duration":19.484,"timestamp":1646055513907306,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/customers","REQUEST_URI":"/api/customers","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/customers","REMOTE_ADDR":"172.23.0.12","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/customers","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Connection":"close","Host":"opbeans-ruby:3000","User-Agent":"http.rb/5.0.4","Traceparent":"00-347c2fc56ceae505f921be9e44e0a2c3-bb4628a125de68cc-01","Tracestate":"es=s:1.0","Elastic-Apm-Traceparent":"00-347c2fc56ceae505f921be9e44e0a2c3-bb4628a125de68cc-01"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.12"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/customers","hostname":"opbeans-ruby","port":"3000","pathname":"/api/customers","search":"","hash":null}},"response":{"status_code":200,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"application/json; charset=utf-8","ETag":"W/\"37992d7e5d1df22332cd7c5be552ddce\"","Cache-Control":"max-age=0, private, must-revalidate","X-Request-Id":"bea29cb0-0739-4655-a5bb-7545ea3b2723","X-Runtime":"0.017625"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":2,"dropped":0}}}
{"span":{"id":"bb4628a125de68cc","transaction_id":"5c3ba3d90cc980f0","parent_id":"5c3ba3d90cc980f0","name":"GET opbeans-ruby","type":"external.http","duration":36.454,"context":{"http":{"url":"http://opbeans-ruby:3000/api/customers","status_code":200,"method":"GET"},"destination":{"address":"opbeans-ruby","port":3000,"service":{"name":"","type":"","resource":"opbeans-ruby:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055513896878,"trace_id":"347c2fc56ceae505f921be9e44e0a2c3","sample_rate":1.0,"outcome":"success"}}
{"span":{"id":"e9b45abe9591e6f2","transaction_id":"36fe6cd73f6c14ab","parent_id":"fdaea770b74376db","name":"SELECT FROM products","type":"db.postgresql.sql","duration":0.837,"context":{"db":{"instance":null,"statement":"SELECT \"products\".* FROM \"products\" WHERE \"products\".\"id\" = $1 LIMIT $2","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055513975275,"trace_id":"4aeafd5280f1fcc910f8273dacc2ac94","sample_rate":1.0,"outcome":null}}
{"span":{"id":"fdaea770b74376db","transaction_id":"36fe6cd73f6c14ab","parent_id":"36fe6cd73f6c14ab","name":"Api::ProductsController#show","type":"app.controller.action","duration":48.942,"context":{},"stacktrace":[],"timestamp":1646055513971432,"trace_id":"4aeafd5280f1fcc910f8273dacc2ac94","sample_rate":1.0,"outcome":null}}
{"span":{"id":"634bf0ab3f286ad6","transaction_id":"1d62f5f9b1e6cd04","parent_id":"0c7f8a5071abae63","name":"SELECT FROM products","type":"db.postgresql.sql","duration":0.825,"context":{"db":{"instance":null,"statement":"SELECT \"products\".* FROM \"products\"","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514058933,"trace_id":"6afc5ca18969f42588c2071e8c5f5296","sample_rate":1.0,"outcome":null}}
{"span":{"id":"210709aa75882ee0","transaction_id":"1d62f5f9b1e6cd04","parent_id":"0c7f8a5071abae63","name":"SELECT FROM product_kinds","type":"db.postgresql.sql","duration":7.668,"context":{"db":{"instance":null,"statement":"SELECT \"product_kinds\".* FROM \"product_kinds\" WHERE \"product_kinds\".\"id\" IN ($1, $2, $3)","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514064143,"trace_id":"6afc5ca18969f42588c2071e8c5f5296","sample_rate":1.0,"outcome":null}}
{"span":{"id":"0c7f8a5071abae63","transaction_id":"1d62f5f9b1e6cd04","parent_id":"1d62f5f9b1e6cd04","name":"Api::ProductsController#index","type":"app.controller.action","duration":28.179,"context":{},"stacktrace":[],"timestamp":1646055514055039,"trace_id":"6afc5ca18969f42588c2071e8c5f5296","sample_rate":1.0,"outcome":null}}
{"span":{"id":"edacb74a860edf47","transaction_id":"911023433d5e696e","parent_id":"911023433d5e696e","name":"GET opbeans-ruby","type":"external.http","duration":62.27,"context":{"http":{"url":"http://opbeans-ruby:3000/api/products/5","status_code":200,"method":"GET"},"destination":{"address":"opbeans-ruby","port":3000,"service":{"name":"","type":"","resource":"opbeans-ruby:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055514026589,"trace_id":"e448e377d72c55cd3347abb31b35d17a","sample_rate":1.0,"outcome":"success"}}
{"span":{"id":"d7663f056bf00a11","transaction_id":"99fa501b86657ad4","parent_id":"3fe9d97315ab4e61","name":"SELECT FROM orders","type":"db.postgresql.sql","duration":1.025,"context":{"db":{"instance":null,"statement":"SELECT \"orders\".* FROM \"orders\" WHERE \"orders\".\"id\" = $1 LIMIT $2","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514127136,"trace_id":"17088c9b8de34dc8e724bfb351e1719c","sample_rate":1.0,"outcome":null}}
{"span":{"id":"420fb18d2dc73b21","transaction_id":"2ede47c316ba7f4d","parent_id":"05451d2a01c9db01","name":"SELECT FROM orders","type":"db.postgresql.sql","duration":0.97,"context":{"db":{"instance":null,"statement":"SELECT \"orders\".* FROM \"orders\" WHERE \"orders\".\"id\" = $1 LIMIT $2","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514185118,"trace_id":"846dad7e17f7187cdda02d6e2238aad6","sample_rate":1.0,"outcome":null}}
{"error":{"id":"5bbb9dcf09337f13bfa97a43e8720803","transaction_id":"2ede47c316ba7f4d","transaction":{"sampled":true,"type":"request"},"trace_id":"846dad7e17f7187cdda02d6e2238aad6","parent_id":"2ede47c316ba7f4d","culprit":"find","timestamp":1646055514194464,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/orders/433","REQUEST_URI":"/api/orders/433","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/orders/433","REMOTE_ADDR":"172.23.0.14","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/orders/433","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Accept":"*/*","Accept-Encoding":"gzip, deflate","Host":"opbeans-ruby:3000","User-Agent":"Python/3.7 aiohttp/3.3.2"},"http_version":null,"method":"GET","socket":{"remote_addr":"172.23.0.14"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/orders/433","hostname":"opbeans-ruby","port":"3000","pathname":"/api/orders/433","search":"","hash":null}},"response":null,"user":null,"service":null},"exception":{"message":"Couldn't find Order with 'id'=433","type":"ActiveRecord::RecordNotFound","module":"ActiveRecord","code":null,"attributes":null,"stacktrace":[{"abs_path":"/usr/local/bundle/gems/activerecord-6.1.4.1/lib/active_record/core.rb","filename":"active_record/core.rb","function":"find","lineno":338,"library_frame":true},{"abs_path":"/app/app/controllers/api/orders_controller.rb","filename":"api/orders_controller.rb","function":"show","lineno":23,"library_frame":false,"context_line":"      render json: Order.find(params[:id])\n","pre_context":["\n","    def show\n"],"post_context":["    end\n","  end\n"]},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/basic_implicit_render.rb","filename":"action_controller/metal/basic_implicit_render.rb","function":"send_action","lineno":6,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/base.rb","filename":"abstract_controller/base.rb","function":"process_action","lineno":228,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/rendering.rb","filename":"action_controller/metal/rendering.rb","function":"process_action","lineno":30,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/callbacks.rb","filename":"abstract_controller/callbacks.rb","function":"block in process_action","lineno":42,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"block in run_callbacks","lineno":117,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actiontext-6.1.4.1/lib/action_text/rendering.rb","filename":"action_text/rendering.rb","function":"with_renderer","lineno":20,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actiontext-6.1.4.1/lib/action_text/engine.rb","filename":"action_text/engine.rb","function":"block (4 levels) in <class:Engine>","lineno":59,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"instance_exec","lineno":126,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"block in run_callbacks","lineno":126,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"run_callbacks","lineno":137,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/callbacks.rb","filename":"abstract_controller/callbacks.rb","function":"process_action","lineno":41,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/rescue.rb","filename":"action_controller/metal/rescue.rb","function":"process_action","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/instrumentation.rb","filename":"action_controller/metal/instrumentation.rb","function":"block in process_action","lineno":34,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb","filename":"active_support/notifications.rb","function":"block in instrument","lineno":203,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications/instrumenter.rb","filename":"active_support/notifications/instrumenter.rb","function":"instrument","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb","filename":"active_support/notifications.rb","function":"instrument","lineno":203,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/instrumentation.rb","filename":"action_controller/metal/instrumentation.rb","function":"process_action","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/params_wrapper.rb","filename":"action_controller/metal/params_wrapper.rb","function":"process_action","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activerecord-6.1.4.1/lib/active_record/railties/controller_runtime.rb","filename":"active_record/railties/controller_runtime.rb","function":"process_action","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/base.rb","filename":"abstract_controller/base.rb","function":"process","lineno":165,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionview-6.1.4.1/lib/action_view/rendering.rb","filename":"action_view/rendering.rb","function":"process","lineno":39,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal.rb","filename":"action_controller/metal.rb","function":"dispatch","lineno":190,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal.rb","filename":"action_controller/metal.rb","function":"dispatch","lineno":254,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"dispatch","lineno":50,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"serve","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"block in serve","lineno":50,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"each","lineno":32,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"serve","lineno":32,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"call","lineno":842,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/static.rb","filename":"rack/static.rb","function":"call","lineno":161,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/tempfile_reaper.rb","filename":"rack/tempfile_reaper.rb","function":"call","lineno":15,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/etag.rb","filename":"rack/etag.rb","function":"call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/conditional_get.rb","filename":"rack/conditional_get.rb","function":"call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/head.rb","filename":"rack/head.rb","function":"call","lineno":12,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/http/permissions_policy.rb","filename":"action_dispatch/http/permissions_policy.rb","function":"call","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/http/content_security_policy.rb","filename":"action_dispatch/http/content_security_policy.rb","function":"call","lineno":18,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb","filename":"rack/session/abstract/id.rb","function":"context","lineno":266,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb","filename":"rack/session/abstract/id.rb","function":"call","lineno":260,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/cookies.rb","filename":"action_dispatch/middleware/cookies.rb","function":"call","lineno":689,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/callbacks.rb","filename":"action_dispatch/middleware/callbacks.rb","function":"block in call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"run_callbacks","lineno":98,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/callbacks.rb","filename":"action_dispatch/middleware/callbacks.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/actionable_exceptions.rb","filename":"action_dispatch/middleware/actionable_exceptions.rb","function":"call","lineno":18,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/debug_exceptions.rb","filename":"action_dispatch/middleware/debug_exceptions.rb","function":"call","lineno":29,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/show_exceptions.rb","filename":"action_dispatch/middleware/show_exceptions.rb","function":"call","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/lograge-0.11.2/lib/lograge/rails_ext/rack/logger.rb","filename":"lograge/rails_ext/rack/logger.rb","function":"call_app","lineno":15,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/rack/logger.rb","filename":"rails/rack/logger.rb","function":"block in call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"block in tagged","lineno":99,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"tagged","lineno":37,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"tagged","lineno":99,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/rack/logger.rb","filename":"rails/rack/logger.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/remote_ip.rb","filename":"action_dispatch/middleware/remote_ip.rb","function":"call","lineno":81,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/request_store-1.5.0/lib/request_store/middleware.rb","filename":"request_store/middleware.rb","function":"call","lineno":19,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/request_id.rb","filename":"action_dispatch/middleware/request_id.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/method_override.rb","filename":"rack/method_override.rb","function":"call","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/runtime.rb","filename":"rack/runtime.rb","function":"call","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/cache/strategy/local_cache_middleware.rb","filename":"active_support/cache/strategy/local_cache_middleware.rb","function":"call","lineno":29,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/executor.rb","filename":"action_dispatch/middleware/executor.rb","function":"call","lineno":14,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/static.rb","filename":"action_dispatch/middleware/static.rb","function":"call","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/sendfile.rb","filename":"rack/sendfile.rb","function":"call","lineno":110,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/host_authorization.rb","filename":"action_dispatch/middleware/host_authorization.rb","function":"call","lineno":92,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":32,"library_frame":false,"context_line":"      @app.call(env)\n","pre_context":["      end\n","    else\n"],"post_context":["    end\n","  rescue Timeout::Error\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"handled":false,"cause":null}}}
{"span":{"id":"81b874bdb7f423a7","transaction_id":"d4faba6b4d84b0f3","parent_id":"d4faba6b4d84b0f3","name":"Api::TypesController#index","type":"app.controller.action","duration":14.397,"context":{},"stacktrace":[],"timestamp":1646055514398472,"trace_id":"53b7ac71dffd0093e388229aafa0e26a","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"d4faba6b4d84b0f3","trace_id":"53b7ac71dffd0093e388229aafa0e26a","parent_id":null,"name":"Api::TypesController#index","type":"request","result":"HTTP 2xx","outcome":"success","duration":23.557,"timestamp":1646055514393648,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/types","REQUEST_URI":"/api/types","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/types","REMOTE_ADDR":"172.23.0.14","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/types","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Accept":"*/*","Accept-Encoding":"gzip, deflate","Host":"opbeans-ruby:3000","User-Agent":"Python/3.7 aiohttp/3.3.2"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.14"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/types","hostname":"opbeans-ruby","port":"3000","pathname":"/api/types","search":"","hash":null}},"response":{"status_code":200,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"application/json; charset=utf-8","Vary":"Accept","ETag":"W/\"32a6f2ac22b5ec871f35104a05ba3759\"","Cache-Control":"max-age=0, private, must-revalidate","X-Request-Id":"20ddcfe1-3fa3-4d2c-8a45-bc06fc9d866a","X-Runtime":"0.021818"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":2,"dropped":0}}}
{"span":{"id":"c2fc936ec2e6482b","transaction_id":"3cc6c1cfc6bfa068","parent_id":"48d5d5e09b8d276b","name":"SELECT FROM orders","type":"db.postgresql.sql","duration":0.629,"context":{"db":{"instance":null,"statement":"SELECT \"orders\".* FROM \"orders\" WHERE \"orders\".\"id\" = $1 LIMIT $2","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514448164,"trace_id":"85504d0e0e50146479273589a2ba820c","sample_rate":1.0,"outcome":null}}
{"span":{"id":"48d5d5e09b8d276b","transaction_id":"3cc6c1cfc6bfa068","parent_id":"3cc6c1cfc6bfa068","name":"Api::OrdersController#show","type":"app.controller.action","duration":6.068,"context":{},"stacktrace":[],"timestamp":1646055514445327,"trace_id":"85504d0e0e50146479273589a2ba820c","sample_rate":1.0,"outcome":null}}
{"span":{"id":"f9d2a8daba7b6c55","transaction_id":"dd6a221fd3ff7542","parent_id":"dd6a221fd3ff7542","name":"GET opbeans-node","type":"external.http","duration":208.373,"context":{"http":{"url":"http://opbeans-node:3000/api/customers","status_code":200,"method":"GET"},"destination":{"address":"opbeans-node","port":3000,"service":{"name":"","type":"","resource":"opbeans-node:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055514509816,"trace_id":"5391e50406c3bf68e0159633f91479c4","sample_rate":1.0,"outcome":"success"}}
{"transaction":{"id":"dd6a221fd3ff7542","trace_id":"5391e50406c3bf68e0159633f91479c4","parent_id":"8f32c1fa6f7d8534","name":"Rack","type":"request","result":"HTTP 2xx","outcome":"success","duration":216.65,"timestamp":1646055514505214,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/customers","REQUEST_URI":"/api/customers","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/customers","REMOTE_ADDR":"172.23.0.12","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/customers","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Connection":"close","Host":"opbeans-ruby:3000","User-Agent":"http.rb/5.0.4","Traceparent":"00-5391e50406c3bf68e0159633f91479c4-8f32c1fa6f7d8534-01","Tracestate":"es=s:1.0","Elastic-Apm-Traceparent":"00-5391e50406c3bf68e0159633f91479c4-8f32c1fa6f7d8534-01"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.12"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/customers","hostname":"opbeans-ruby","port":"3000","pathname":"/api/customers","search":"","hash":null}},"response":{"status_code":200,"headers":{"Content-Type":"application/json"},"headers_sent":true,"finished":true},"user":null,"service":null},"span_count":{"started":1,"dropped":0}}}
{"span":{"id":"8f32c1fa6f7d8534","transaction_id":"bcfdb72e97531e8e","parent_id":"bcfdb72e97531e8e","name":"GET opbeans-ruby","type":"external.http","duration":227.618,"context":{"http":{"url":"http://opbeans-ruby:3000/api/customers","status_code":200,"method":"GET"},"destination":{"address":"opbeans-ruby","port":3000,"service":{"name":"","type":"","resource":"opbeans-ruby:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055514498248,"trace_id":"5391e50406c3bf68e0159633f91479c4","sample_rate":1.0,"outcome":"success"}}
{"span":{"id":"21879ef5ffbf9c19","transaction_id":"ce71aa9c56058b76","parent_id":"9d1e91017b0df18a","name":"SELECT FROM products","type":"db.postgresql.sql","duration":0.667,"context":{"db":{"instance":null,"statement":"SELECT \"products\".* FROM \"products\" WHERE \"products\".\"id\" = $1 LIMIT $2","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514769032,"trace_id":"78a69dbb49224723f7398dc7e5bab6cf","sample_rate":1.0,"outcome":null}}
{"span":{"id":"9d1e91017b0df18a","transaction_id":"ce71aa9c56058b76","parent_id":"ce71aa9c56058b76","name":"Api::CustomersController#index","type":"app.controller.action","duration":23.595,"context":{},"stacktrace":[],"timestamp":1646055514766099,"trace_id":"78a69dbb49224723f7398dc7e5bab6cf","sample_rate":1.0,"outcome":null}}
{"span":{"id":"161e92818848a58c","transaction_id":"838a95ea984dae8d","parent_id":"47c74bab1df33484","name":"SELECT FROM customers","type":"db.postgresql.sql","duration":1.418,"context":{"db":{"instance":null,"statement":"SELECT DISTINCT \"customers\".* FROM \"customers\" INNER JOIN \"orders\" ON \"customers\".\"id\" = \"orders\".\"customer_id\" INNER JOIN \"order_lines\" ON \"orders\".\"id\" = \"order_lines\".\"order_id\" WHERE \"order_lines\".\"product_id\" = $1","type":"sql","user":null,"rows_affected":null},"destination":{"address":null,"port":null,"service":{"name":"postgresql","type":"db","resource":"postgresql"}}},"stacktrace":[],"timestamp":1646055514833974,"trace_id":"1dd841a07fe6b88d5b0194321be83fcd","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"838a95ea984dae8d","trace_id":"1dd841a07fe6b88d5b0194321be83fcd","parent_id":null,"name":"Api::CustomersController#index","type":"request","result":"HTTP 2xx","outcome":"success","duration":34.183,"timestamp":1646055514816602,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/api/products/2/customers","REQUEST_URI":"/api/products/2/customers","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/api/products/2/customers","REMOTE_ADDR":"172.23.0.14","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/api/products/2/customers","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Accept":"*/*","Accept-Encoding":"gzip, deflate","Host":"opbeans-ruby:3000","User-Agent":"Python/3.7 aiohttp/3.3.2"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.14"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/api/products/2/customers","hostname":"opbeans-ruby","port":"3000","pathname":"/api/products/2/customers","search":"","hash":null}},"response":{"status_code":200,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"application/json; charset=utf-8","Vary":"Accept","ETag":"W/\"e4763b7c6f912f9b655fa667d293bf0c\"","Cache-Control":"max-age=0, private, must-revalidate","X-Request-Id":"b0183ffb-d0a2-44d6-9f4f-21a65dbbc6a4","X-Runtime":"0.032363"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":3,"dropped":0}}}
{"error":{"id":"c2bdfd26bdb6f45b8b43d7a4596ddff9","transaction_id":"37685782b2f932fa","transaction":{"sampled":true,"type":"request"},"trace_id":"96a3fafa756406f235bdd56885345ff8","parent_id":"adea934053bd1834","culprit":"message","timestamp":1646055514884017,"context":{"custom":{},"tags":{"company":"opbeans"},"request":null,"response":null,"user":null,"service":null},"log":{"message":"This is a message","level":null,"logger_name":null,"param_message":null,"stacktrace":[{"abs_path":"/app/app/controllers/errors_controller.rb","filename":"errors_controller.rb","function":"message","lineno":13,"library_frame":false,"context_line":"    ElasticAPM.report_message \"This is a message\"\n","pre_context":["\n","  def message\n"],"post_context":["    render plain: 'error', status: 500\n","  end\n"]},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/basic_implicit_render.rb","filename":"action_controller/metal/basic_implicit_render.rb","function":"send_action","lineno":6,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/base.rb","filename":"abstract_controller/base.rb","function":"process_action","lineno":228,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/rendering.rb","filename":"action_controller/metal/rendering.rb","function":"process_action","lineno":30,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/callbacks.rb","filename":"abstract_controller/callbacks.rb","function":"block in process_action","lineno":42,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"block in run_callbacks","lineno":117,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actiontext-6.1.4.1/lib/action_text/rendering.rb","filename":"action_text/rendering.rb","function":"with_renderer","lineno":20,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actiontext-6.1.4.1/lib/action_text/engine.rb","filename":"action_text/engine.rb","function":"block (4 levels) in <class:Engine>","lineno":59,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"instance_exec","lineno":126,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"block in run_callbacks","lineno":126,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"run_callbacks","lineno":137,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/callbacks.rb","filename":"abstract_controller/callbacks.rb","function":"process_action","lineno":41,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/rescue.rb","filename":"action_controller/metal/rescue.rb","function":"process_action","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/instrumentation.rb","filename":"action_controller/metal/instrumentation.rb","function":"block in process_action","lineno":34,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb","filename":"active_support/notifications.rb","function":"block in instrument","lineno":203,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications/instrumenter.rb","filename":"active_support/notifications/instrumenter.rb","function":"instrument","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb","filename":"active_support/notifications.rb","function":"instrument","lineno":203,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/instrumentation.rb","filename":"action_controller/metal/instrumentation.rb","function":"process_action","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal/params_wrapper.rb","filename":"action_controller/metal/params_wrapper.rb","function":"process_action","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activerecord-6.1.4.1/lib/active_record/railties/controller_runtime.rb","filename":"active_record/railties/controller_runtime.rb","function":"process_action","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/abstract_controller/base.rb","filename":"abstract_controller/base.rb","function":"process","lineno":165,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionview-6.1.4.1/lib/action_view/rendering.rb","filename":"action_view/rendering.rb","function":"process","lineno":39,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal.rb","filename":"action_controller/metal.rb","function":"dispatch","lineno":190,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_controller/metal.rb","filename":"action_controller/metal.rb","function":"dispatch","lineno":254,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"dispatch","lineno":50,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"serve","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"block in serve","lineno":50,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"each","lineno":32,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/journey/router.rb","filename":"action_dispatch/journey/router.rb","function":"serve","lineno":32,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/routing/route_set.rb","filename":"action_dispatch/routing/route_set.rb","function":"call","lineno":842,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/static.rb","filename":"rack/static.rb","function":"call","lineno":161,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/tempfile_reaper.rb","filename":"rack/tempfile_reaper.rb","function":"call","lineno":15,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/etag.rb","filename":"rack/etag.rb","function":"call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/conditional_get.rb","filename":"rack/conditional_get.rb","function":"call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/head.rb","filename":"rack/head.rb","function":"call","lineno":12,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/http/permissions_policy.rb","filename":"action_dispatch/http/permissions_policy.rb","function":"call","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/http/content_security_policy.rb","filename":"action_dispatch/http/content_security_policy.rb","function":"call","lineno":18,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb","filename":"rack/session/abstract/id.rb","function":"context","lineno":266,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/session/abstract/id.rb","filename":"rack/session/abstract/id.rb","function":"call","lineno":260,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/cookies.rb","filename":"action_dispatch/middleware/cookies.rb","function":"call","lineno":689,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/callbacks.rb","filename":"action_dispatch/middleware/callbacks.rb","function":"block in call","lineno":27,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/callbacks.rb","filename":"active_support/callbacks.rb","function":"run_callbacks","lineno":98,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/callbacks.rb","filename":"action_dispatch/middleware/callbacks.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/actionable_exceptions.rb","filename":"action_dispatch/middleware/actionable_exceptions.rb","function":"call","lineno":18,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/debug_exceptions.rb","filename":"action_dispatch/middleware/debug_exceptions.rb","function":"call","lineno":29,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/show_exceptions.rb","filename":"action_dispatch/middleware/show_exceptions.rb","function":"call","lineno":33,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/lograge-0.11.2/lib/lograge/rails_ext/rack/logger.rb","filename":"lograge/rails_ext/rack/logger.rb","function":"call_app","lineno":15,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/rack/logger.rb","filename":"rails/rack/logger.rb","function":"block in call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"block in tagged","lineno":99,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"tagged","lineno":37,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/tagged_logging.rb","filename":"active_support/tagged_logging.rb","function":"tagged","lineno":99,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/rack/logger.rb","filename":"rails/rack/logger.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/remote_ip.rb","filename":"action_dispatch/middleware/remote_ip.rb","function":"call","lineno":81,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/request_store-1.5.0/lib/request_store/middleware.rb","filename":"request_store/middleware.rb","function":"call","lineno":19,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/request_id.rb","filename":"action_dispatch/middleware/request_id.rb","function":"call","lineno":26,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/method_override.rb","filename":"rack/method_override.rb","function":"call","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/runtime.rb","filename":"rack/runtime.rb","function":"call","lineno":22,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/activesupport-6.1.4.1/lib/active_support/cache/strategy/local_cache_middleware.rb","filename":"active_support/cache/strategy/local_cache_middleware.rb","function":"call","lineno":29,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/executor.rb","filename":"action_dispatch/middleware/executor.rb","function":"call","lineno":14,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/static.rb","filename":"action_dispatch/middleware/static.rb","function":"call","lineno":24,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/rack-2.2.3/lib/rack/sendfile.rb","filename":"rack/sendfile.rb","function":"call","lineno":110,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/actionpack-6.1.4.1/lib/action_dispatch/middleware/host_authorization.rb","filename":"action_dispatch/middleware/host_authorization.rb","function":"call","lineno":92,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":32,"library_frame":false,"context_line":"      @app.call(env)\n","pre_context":["      end\n","    else\n"],"post_context":["    end\n","  rescue Timeout::Error\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}]}}}
{"span":{"id":"3389dd306dd586a4","transaction_id":"37685782b2f932fa","parent_id":"adea934053bd1834","name":"text template","type":"template.view","duration":0.218,"context":{},"stacktrace":[],"timestamp":1646055514891476,"trace_id":"96a3fafa756406f235bdd56885345ff8","sample_rate":1.0,"outcome":null}}
{"span":{"id":"adea934053bd1834","transaction_id":"37685782b2f932fa","parent_id":"37685782b2f932fa","name":"ErrorsController#message","type":"app.controller.action","duration":17.026,"context":{},"stacktrace":[],"timestamp":1646055514882444,"trace_id":"96a3fafa756406f235bdd56885345ff8","sample_rate":1.0,"outcome":null}}
{"transaction":{"id":"37685782b2f932fa","trace_id":"96a3fafa756406f235bdd56885345ff8","parent_id":null,"name":"ErrorsController#message","type":"request","result":"HTTP 5xx","outcome":"failure","duration":24.662,"timestamp":1646055514876517,"sampled":true,"sample_rate":1.0,"context":{"custom":{},"tags":{"company":"opbeans"},"request":{"body":"[SKIPPED]","cookies":{},"env":{"SCRIPT_NAME":"","QUERY_STRING":"","SERVER_PROTOCOL":"HTTP/1.1","SERVER_SOFTWARE":"puma 5.5.2 Zawgyi","GATEWAY_INTERFACE":"CGI/1.2","REQUEST_METHOD":"GET","REQUEST_PATH":"/log-message","REQUEST_URI":"/log-message","SERVER_NAME":"opbeans-ruby","SERVER_PORT":"3000","PATH_INFO":"/log-message","REMOTE_ADDR":"172.23.0.14","ROUTES_9200_SCRIPT_NAME":"","ORIGINAL_FULLPATH":"/log-message","ORIGINAL_SCRIPT_NAME":""},"headers":{"Version":"HTTP/1.1","Accept":"*/*","Accept-Encoding":"gzip, deflate","Host":"opbeans-ruby:3000","User-Agent":"Python/3.7 aiohttp/3.3.2"},"http_version":"1.1","method":"GET","socket":{"remote_addr":"172.23.0.14"},"url":{"protocol":"http","full":"http://opbeans-ruby:3000/log-message","hostname":"opbeans-ruby","port":"3000","pathname":"/log-message","search":"","hash":null}},"response":{"status_code":500,"headers":{"X-Frame-Options":"SAMEORIGIN","X-XSS-Protection":"1; mode=block","X-Content-Type-Options":"nosniff","X-Download-Options":"noopen","X-Permitted-Cross-Domain-Policies":"none","Referrer-Policy":"strict-origin-when-cross-origin","Content-Type":"text/plain; charset=utf-8","Vary":"Accept","Cache-Control":"no-cache","X-Request-Id":"444e1421-c4ee-440e-9f27-33adcf9a3886","X-Runtime":"0.021405"},"headers_sent":true,"finished":true},"user":{"id":"3229","email":"coffeelover@example.com","username":"coffeelover"},"service":null},"span_count":{"started":2,"dropped":0}}}
{"span":{"id":"636ae26949f87e18","transaction_id":"efb860d69d0e38dd","parent_id":"efb860d69d0e38dd","name":"GET opbeans-node","type":"external.http","duration":57.028,"context":{"http":{"url":"http://opbeans-node:3000/api/products/2","status_code":200,"method":"GET"},"destination":{"address":"opbeans-node","port":3000,"service":{"name":"","type":"","resource":"opbeans-node:3000"}}},"stacktrace":[{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"tap","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"start_span","lineno":235,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm.rb","filename":"elastic_apm.rb","function":"with_span","lineno":290,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/spies/http.rb","filename":"elastic_apm/spies/http.rb","function":"perform","lineno":45,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/client.rb","filename":"http/client.rb","function":"request","lineno":31,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"request","lineno":75,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/http-5.0.4/lib/http/chainable.rb","filename":"http/chainable.rb","function":"get","lineno":20,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"block in call","lineno":23,"library_frame":false,"context_line":"        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","pre_context":["\n","      Timeout.timeout(15) do\n"],"post_context":["\n","        [\n"]},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in timeout","lineno":95,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"block in catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"catch","lineno":33,"library_frame":true},{"abs_path":"/usr/local/lib/ruby/2.7.0/timeout.rb","filename":"timeout.rb","function":"timeout","lineno":110,"library_frame":true},{"abs_path":"/app/lib/opbeans_shuffle.rb","filename":"opbeans_shuffle.rb","function":"call","lineno":22,"library_frame":false,"context_line":"      Timeout.timeout(15) do\n","pre_context":["      end\n","\n"],"post_context":["        resp = HTTP.get(\"#{lucky_winner}#{path}\")\n","\n"]},{"abs_path":"/usr/local/bundle/gems/elastic-apm-4.5.0/lib/elastic_apm/middleware.rb","filename":"elastic_apm/middleware.rb","function":"call","lineno":36,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/railties-6.1.4.1/lib/rails/engine.rb","filename":"rails/engine.rb","function":"call","lineno":539,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/configuration.rb","filename":"puma/configuration.rb","function":"call","lineno":249,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"block in handle_request","lineno":77,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"with_force_shutdown","lineno":340,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/request.rb","filename":"puma/request.rb","function":"handle_request","lineno":76,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/server.rb","filename":"puma/server.rb","function":"process_client","lineno":447,"library_frame":true},{"abs_path":"/usr/local/bundle/gems/puma-5.5.2/lib/puma/thread_pool.rb","filename":"puma/thread_pool.rb","function":"block in spawn_thread","lineno":147,"library_frame":true}],"timestamp":1646055514849212,"trace_id":"23d2cc67b7a546fbdae6cb1f588c6197","sample_rate":1.0,"outcome":"success"}}
