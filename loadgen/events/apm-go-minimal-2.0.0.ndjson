{"metadata":{"system":{"architecture":"arm64","hostname":"3ff988a6070f","platform":"linux"},"process":{"pid":1,"argv":["/opbeans-go","-log-json","-log-level=debug","-listen=:3000","-frontend=/opbeans-frontend","-db=postgres:","-cache=redis://redis:6379"],"ppid":0,"title":"opbeans-go"},"service":{"agent":{"name":"go","version":"2.0.0"},"environment":"production","language":{"name":"go","version":"go1.17.7"},"name":"opbeans-go","runtime":{"name":"gc","version":"go1.17.7"},"version":"None"}}}
{"span":{"duration":3.421459,"id":"6eeb30decaacde3f","name":"DNS opbeans-ruby","timestamp":1646055412688946,"trace_id":"1d6d6c15af2a7419a949c700fd288556","type":"external","action":"dns","outcome":"success","parent_id":"f947708655303f0c","sample_rate":1,"subtype":"http","transaction_id":"1d6d6c15af2a7419"}}
{"span":{"duration":2.524666,"id":"34b4da00b3bfa833","name":"Connect 172.23.0.12:3000","timestamp":1646055412692388,"trace_id":"1d6d6c15af2a7419a949c700fd288556","type":"external","action":"connect","outcome":"failure","parent_id":"f947708655303f0c","sample_rate":1,"subtype":"http","transaction_id":"1d6d6c15af2a7419"}}
{"span":{"duration":14.666833,"id":"f947708655303f0c","name":"GET opbeans-ruby:3000","timestamp":1646055412680258,"trace_id":"1d6d6c15af2a7419a949c700fd288556","type":"external","context":{"destination":{"address":"opbeans-ruby","port":3000,"service":{"name":"http://opbeans-ruby:3000","resource":"opbeans-ruby:3000","type":"external"}},"http":{"url":"http://opbeans-ruby:3000/api/orders"}},"outcome":"success","parent_id":"1d6d6c15af2a7419","sample_rate":1,"stacktrace":[{"filename":"span.go","lineno":368,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/v2@v2.0.0-20220125052152-dbce0fc5646c/span.go","function":"(*Span).End","library_frame":true,"module":"go.elastic.co/apm/v2"},{"filename":"client.go","lineno":129,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmhttp/v2@v2.0.0-20220125052152-dbce0fc5646c/client.go","function":"(*roundTripper).RoundTrip","library_frame":true,"module":"go.elastic.co/apm/module/apmhttp/v2"},{"filename":"reverseproxy.go","lineno":298,"abs_path":"/usr/local/go/src/net/http/httputil/reverseproxy.go","function":"(*ReverseProxy).ServeHTTP","library_frame":true,"module":"net/http/httputil"},{"filename":"main.go","lineno":196,"abs_path":"/src/opbeans-go/main.go","function":"Main.func2","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":174,"abs_path":"/src/opbeans-go/main.go","function":"Main.func1","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"logger.go","lineno":36,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}],"subtype":"http","transaction_id":"1d6d6c15af2a7419"}}
{"error":{"id":"8d14191d31443e5a370268738553a0ca","timestamp":1646055412678284,"culprit":"logrusMiddleware","log":{"message":"GET /api/orders (502)","level":"error","stacktrace":[{"filename":"hook.go","lineno":102,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmlogrus/v2@v2.0.0-20220125052152-dbce0fc5646c/hook.go","function":"(*Hook).Fire","library_frame":true,"module":"go.elastic.co/apm/module/apmlogrus/v2"},{"filename":"hooks.go","lineno":28,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/hooks.go","function":"LevelHooks.Fire","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":272,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).fireHooks","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":241,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).log","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":293,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Log","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":338,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Logf","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":367,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Errorf","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"logger.go","lineno":56,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}]},"parent_id":"1d6d6c15af2a7419","trace_id":"1d6d6c15af2a7419a949c700fd288556","transaction":{"sampled":false},"transaction_id":"1d6d6c15af2a7419"}}
{"transaction":{"duration":27.615709,"id":"1d6d6c15af2a7419","name":"GET /api/orders","span_count":{"dropped":0,"started":3},"timestamp":1646055412678262,"trace_id":"1d6d6c15af2a7419a949c700fd288556","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"status_code":502},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"failure","result":"HTTP 5xx","sample_rate":1}}
{"span":{"duration":23.582375,"id":"48e166a127c10be3","name":"SELECT FROM products","timestamp":1646055421611175,"trace_id":"22ce49b1aad6131ea366ce3ad6176d84","type":"db","action":"query","context":{"db":{"statement":"SELECT\n\t  id, sku, name, stock, SUM(order_lines.amount) AS sold\nFROM products JOIN order_lines ON id=product_id GROUP BY products.id ORDER BY sold DESC\nLIMIT 3\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"8ae985673f7cc477","sample_rate":1,"stacktrace":[{"filename":"span.go","lineno":368,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/v2@v2.0.0-20220125052152-dbce0fc5646c/span.go","function":"(*Span).End","library_frame":true,"module":"go.elastic.co/apm/v2"},{"filename":"conn.go","lineno":119,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmsql/v2@v2.0.0-20220125052152-dbce0fc5646c/conn.go","function":"(*conn).finishSpan","library_frame":true,"module":"go.elastic.co/apm/module/apmsql/v2"},{"filename":"conn.go","lineno":139,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmsql/v2@v2.0.0-20220125052152-dbce0fc5646c/conn.go","function":"(*conn).QueryContext","library_frame":true,"module":"go.elastic.co/apm/module/apmsql/v2"},{"filename":"ctxutil.go","lineno":48,"abs_path":"/usr/local/go/src/database/sql/ctxutil.go","function":"ctxDriverQuery","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1722,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).queryDC.func1","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":3396,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"withLock","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1717,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).queryDC","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1700,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).query","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1674,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).QueryContext","library_frame":true,"module":"database/sql"},{"filename":"products.go","lineno":41,"abs_path":"/src/opbeans-go/products.go","function":"getTopProducts","module":"main"},{"filename":"api.go","lineno":102,"abs_path":"/src/opbeans-go/api.go","function":"apiHandlers.getProductDetails","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":200,"abs_path":"/src/opbeans-go/main.go","function":"Main.func2","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":174,"abs_path":"/src/opbeans-go/main.go","function":"Main.func1","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"logger.go","lineno":36,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}],"subtype":"postgresql","transaction_id":"8ae985673f7cc477"}}
{"transaction":{"duration":28.692916,"id":"8ae985673f7cc477","name":"GET /api/products/:id","span_count":{"dropped":0,"started":1},"timestamp":1646055421608265,"trace_id":"22ce49b1aad6131ea366ce3ad6176d84","type":"request","context":{"request":{"method":"GET","url":{"hostname":"opbeans-go","pathname":"/api/products/top","port":"3000","protocol":"http","full":"http://opbeans-go:3000/api/products/top"},"headers":{"Traceparent":"00-22ce49b1aad6131ea366ce3ad6176d84-fe964d6345cba85a-01","Tracestate":"es=s:1","Elastic-Apm-Traceparent":"00-22ce49b1aad6131ea366ce3ad6176d84-fe964d6345cba85a-01","Connection":"close"},"http_version":"1.1","socket":{"remote_address":"172.23.0.10"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","parent_id":"fe964d6345cba85a","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":2.0887089999999997,"id":"e2cc6c8240ad357d","name":"DNS opbeans-python","timestamp":1646055421981209,"trace_id":"bd5afb176eb4cd16cb068b24d8e5c77c","type":"external","action":"dns","outcome":"success","parent_id":"108ebf00789f2b7a","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"9850099ec17d6583"}}
{"span":{"duration":0.703541,"id":"1ef0c066f342f20b","name":"Connect 172.23.0.11:3000","timestamp":1646055421983308,"trace_id":"bd5afb176eb4cd16cb068b24d8e5c77c","type":"external","action":"connect","outcome":"failure","parent_id":"108ebf00789f2b7a","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"9850099ec17d6583"}}
{"span":{"duration":3.367083,"id":"108ebf00789f2b7a","name":"GET opbeans-python:3000","timestamp":1646055421980653,"trace_id":"bd5afb176eb4cd16cb068b24d8e5c77c","type":"external","context":{"destination":{"address":"opbeans-python","port":3000,"service":{"name":"http://opbeans-python:3000","resource":"opbeans-python:3000","type":"external"}},"http":{"url":"http://opbeans-python:3000/api/products/2/customers"}},"outcome":"success","parent_id":"9850099ec17d6583","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"9850099ec17d6583"}}
{"error":{"id":"d6d7fff70e8d888c7d9d51ab794f89c9","timestamp":1646055421980162,"culprit":"logrusMiddleware","log":{"message":"GET /api/products/2/customers (502)","level":"error","stacktrace":[{"filename":"hook.go","lineno":102,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmlogrus/v2@v2.0.0-20220125052152-dbce0fc5646c/hook.go","function":"(*Hook).Fire","library_frame":true,"module":"go.elastic.co/apm/module/apmlogrus/v2"},{"filename":"hooks.go","lineno":28,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/hooks.go","function":"LevelHooks.Fire","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":272,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).fireHooks","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":241,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).log","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":293,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Log","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":338,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Logf","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"entry.go","lineno":367,"abs_path":"/go/pkg/mod/github.com/sirupsen/logrus@v1.8.1/entry.go","function":"(*Entry).Errorf","library_frame":true,"module":"github.com/sirupsen/logrus"},{"filename":"logger.go","lineno":56,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}]},"parent_id":"9850099ec17d6583","trace_id":"bd5afb176eb4cd16cb068b24d8e5c77c","transaction":{"sampled":false},"transaction_id":"9850099ec17d6583"}}
{"transaction":{"duration":4.140083,"id":"9850099ec17d6583","name":"GET /api/products/:id/customers","span_count":{"dropped":0,"started":3},"timestamp":1646055421980161,"trace_id":"bd5afb176eb4cd16cb068b24d8e5c77c","type":"request","context":{"request":{"method":"GET","url":{"hostname":"opbeans-go","pathname":"/api/products/2/customers","port":"3000","protocol":"http","full":"http://opbeans-go:3000/api/products/2/customers"},"headers":{"Traceparent":"00-bd5afb176eb4cd16cb068b24d8e5c77c-111d7262ba8fd2bb-01","Tracestate":"es=s:1","Elastic-Apm-Traceparent":"00-bd5afb176eb4cd16cb068b24d8e5c77c-111d7262ba8fd2bb-01","Connection":"close"},"http_version":"1.1","socket":{"remote_address":"172.23.0.10"}},"response":{"status_code":502},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"failure","parent_id":"111d7262ba8fd2bb","result":"HTTP 5xx","sample_rate":1}}
{"span":{"duration":1.334708,"id":"3cac7d8b005d9f72","name":"SELECT FROM orders","timestamp":1646055422836437,"trace_id":"c5e38af6aef0bdb62a93096d55ded513","type":"db","action":"query","context":{"db":{"statement":"SELECT\n  orders.id, orders.created_at,\n  customers.id, customers.full_name\nFROM orders JOIN customers ON orders.customer_id=customers.id\nLIMIT 1000\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"c5e38af6aef0bdb6","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"c5e38af6aef0bdb6"}}
{"transaction":{"duration":27.423541999999998,"id":"c5e38af6aef0bdb6","name":"GET /api/orders","span_count":{"dropped":0,"started":1},"timestamp":1646055422836411,"trace_id":"c5e38af6aef0bdb62a93096d55ded513","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","result":"HTTP 2xx","sample_rate":1}}
{"metricset":{"samples":{"span.self_time.count":{"value":1},"span.self_time.sum.us":{"value":1334.000000708}},"timestamp":1646055432713885,"span":{"subtype":"postgresql","type":"db"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":2},"span.self_time.sum.us":{"value":39037.00000071}},"timestamp":1646055432713885,"span":{"type":"app"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":3},"span.self_time.sum.us":{"value":14666.000000833}},"timestamp":1646055432713885,"span":{"subtype":"http","type":"external"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":1},"span.self_time.sum.us":{"value":5110.000000541}},"timestamp":1646055432713885,"span":{"type":"app"},"transaction":{"name":"GET /api/products/:id","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":1},"span.self_time.sum.us":{"value":23582.000000375}},"timestamp":1646055432713885,"span":{"subtype":"postgresql","type":"db"},"transaction":{"name":"GET /api/products/:id","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":1},"span.self_time.sum.us":{"value":773}},"timestamp":1646055432713885,"span":{"type":"app"},"transaction":{"name":"GET /api/products/:id/customers","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":3},"span.self_time.sum.us":{"value":3367.000000083}},"timestamp":1646055432713885,"span":{"subtype":"http","type":"external"},"transaction":{"name":"GET /api/products/:id/customers","type":"request"}}}
{"metricset":{"samples":{"golang.heap.allocations.frees":{"value":28919},"golang.heap.allocations.allocated":{"value":5.480272e+06},"golang.heap.system.stack":{"value":589824},"golang.heap.gc.total_pause.ns":{"value":3.18371e+06},"system.process.memory.size":{"value":1.265262592e+09},"golang.heap.system.obtained":{"value":1.1993088e+07},"golang.heap.gc.next_gc_limit":{"value":9.7284e+06},"golang.heap.gc.cpu_fraction":{"value":0.0003350751466635942},"golang.heap.system.released":{"value":4.186112e+06},"golang.goroutines":{"value":9},"system.cpu.total.norm.pct":{"value":0.905876235049402},"system.process.cpu.total.norm.pct":{"value":0.000953371468192061},"system.memory.actual.free":{"value":8.333594624e+09},"golang.heap.allocations.total":{"value":7.717776e+06},"golang.heap.allocations.active":{"value":7.307264e+06},"golang.heap.gc.total_count":{"value":3},"system.memory.total":{"value":1.2544401408e+10},"system.process.memory.rss.bytes":{"value":1.845248e+07},"golang.heap.allocations.mallocs":{"value":42268},"golang.heap.allocations.objects":{"value":13349},"golang.heap.allocations.idle":{"value":4.685824e+06},"golang.heap.system.total":{"value":2.0005896e+07}},"timestamp":1646055432713885}}
{"span":{"duration":1.922958,"id":"221583a900f0e3ca","name":"SELECT FROM orders","timestamp":1646055432992697,"trace_id":"ed70e9f1ab4b68ce0a6954484372f463","type":"db","action":"query","context":{"db":{"statement":"SELECT\n  orders.id, orders.created_at,\n  customers.id, customers.full_name\nFROM orders JOIN customers ON orders.customer_id=customers.id\nLIMIT 1000\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"ed70e9f1ab4b68ce","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"ed70e9f1ab4b68ce"}}
{"transaction":{"duration":14.846875,"id":"ed70e9f1ab4b68ce","name":"GET /api/orders","span_count":{"dropped":0,"started":1},"timestamp":1646055432992648,"trace_id":"ed70e9f1ab4b68ce0a6954484372f463","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":1.296084,"id":"d1ddd3d1a21a700b","name":"SELECT FROM orders","timestamp":1646055443148442,"trace_id":"5c60ecb39d4a689c8e2b8740178f6807","type":"db","action":"query","context":{"db":{"statement":"SELECT\n  orders.id, orders.created_at,\n  customers.id, customers.full_name\nFROM orders JOIN customers ON orders.customer_id=customers.id\nLIMIT 1000\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"5c60ecb39d4a689c","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"5c60ecb39d4a689c"}}
{"transaction":{"duration":4.586584,"id":"5c60ecb39d4a689c","name":"GET /api/orders","span_count":{"dropped":0,"started":1},"timestamp":1646055443148375,"trace_id":"5c60ecb39d4a689c8e2b8740178f6807","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":7.547125,"id":"902ac14d52cc0eab","name":"SELECT FROM products","timestamp":1646055452991210,"trace_id":"3fcfaa5c98d6208f2362d3284089c8f0","type":"db","action":"query","context":{"db":{"statement":"SELECT COUNT(*) FROM products","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"7e052774b93c625b","sample_rate":1,"stacktrace":[{"filename":"span.go","lineno":368,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/v2@v2.0.0-20220125052152-dbce0fc5646c/span.go","function":"(*Span).End","library_frame":true,"module":"go.elastic.co/apm/v2"},{"filename":"conn.go","lineno":119,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmsql/v2@v2.0.0-20220125052152-dbce0fc5646c/conn.go","function":"(*conn).finishSpan","library_frame":true,"module":"go.elastic.co/apm/module/apmsql/v2"},{"filename":"conn.go","lineno":139,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmsql/v2@v2.0.0-20220125052152-dbce0fc5646c/conn.go","function":"(*conn).QueryContext","library_frame":true,"module":"go.elastic.co/apm/module/apmsql/v2"},{"filename":"ctxutil.go","lineno":48,"abs_path":"/usr/local/go/src/database/sql/ctxutil.go","function":"ctxDriverQuery","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1722,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).queryDC.func1","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":3396,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"withLock","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1717,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).queryDC","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1700,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).query","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1674,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).QueryContext","library_frame":true,"module":"database/sql"},{"filename":"sql.go","lineno":1778,"abs_path":"/usr/local/go/src/database/sql/sql.go","function":"(*DB).QueryRowContext","library_frame":true,"module":"database/sql"},{"filename":"stats.go","lineno":32,"abs_path":"/src/opbeans-go/stats.go","function":"getStats","module":"main"},{"filename":"api.go","lineno":66,"abs_path":"/src/opbeans-go/api.go","function":"apiHandlers.getStats","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":200,"abs_path":"/src/opbeans-go/main.go","function":"Main.func2","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":174,"abs_path":"/src/opbeans-go/main.go","function":"Main.func1","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"logger.go","lineno":36,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}],"subtype":"postgresql","transaction_id":"7e052774b93c625b"}}
{"span":{"duration":1.654542,"id":"84b88b28a57df16b","name":"SELECT FROM customers","timestamp":1646055452999791,"trace_id":"3fcfaa5c98d6208f2362d3284089c8f0","type":"db","action":"query","context":{"db":{"statement":"SELECT COUNT(*) FROM customers","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"7e052774b93c625b","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"7e052774b93c625b"}}
{"span":{"duration":1.511625,"id":"f8156f876a05b78f","name":"SELECT FROM orders","timestamp":1646055453001995,"trace_id":"3fcfaa5c98d6208f2362d3284089c8f0","type":"db","action":"query","context":{"db":{"statement":"SELECT COUNT(*) FROM orders","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"7e052774b93c625b","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"7e052774b93c625b"}}
{"span":{"duration":2.094542,"id":"118eafc13173f1f0","name":"SELECT FROM products","timestamp":1646055453003546,"trace_id":"3fcfaa5c98d6208f2362d3284089c8f0","type":"db","action":"query","context":{"db":{"statement":"\nSELECT\n  SUM(selling_price), SUM(cost), SUM(selling_price-cost)\nFROM products JOIN order_lines ON products.id=order_lines.product_id\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"7e052774b93c625b","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"7e052774b93c625b"}}
{"transaction":{"duration":21.154042,"id":"7e052774b93c625b","name":"GET /api/stats","span_count":{"dropped":0,"started":4},"timestamp":1646055452987422,"trace_id":"3fcfaa5c98d6208f2362d3284089c8f0","type":"request","context":{"request":{"method":"GET","url":{"hostname":"opbeans-go","pathname":"/api/stats","port":"3000","protocol":"http","full":"http://opbeans-go:3000/api/stats"},"headers":{"Elastic-Apm-Traceparent":"00-3fcfaa5c98d6208f2362d3284089c8f0-17cf98ca8a8debf2-01","Connection":"close","Traceparent":"00-3fcfaa5c98d6208f2362d3284089c8f0-17cf98ca8a8debf2-01","Tracestate":"es=s:1"},"http_version":"1.1","socket":{"remote_address":"172.23.0.10"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}},"tags":{"served_from_cache":"false"}},"outcome":"success","parent_id":"17cf98ca8a8debf2","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":0.658625,"id":"6890da54f8f1c713","name":"DNS opbeans-python","timestamp":1646055453297856,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"external","action":"dns","outcome":"success","parent_id":"d026dc7ec2576951","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"939cf5cf0f02477f"}}
{"span":{"duration":0.33158299999999996,"id":"665c0a6480d252e8","name":"Connect 172.23.0.11:3000","timestamp":1646055453298521,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"external","action":"connect","outcome":"success","parent_id":"d026dc7ec2576951","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"939cf5cf0f02477f"}}
{"span":{"duration":5423.497128,"id":"399dfa16353e5017","name":"Request","timestamp":1646055453298865,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"external","action":"request","outcome":"success","parent_id":"d026dc7ec2576951","sample_rate":1,"stacktrace":[{"filename":"span.go","lineno":368,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/v2@v2.0.0-20220125052152-dbce0fc5646c/span.go","function":"(*Span).End","library_frame":true,"module":"go.elastic.co/apm/v2"},{"filename":"clienttrace.go","lineno":130,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmhttp/v2@v2.0.0-20220125052152-dbce0fc5646c/clienttrace.go","function":"withClientTrace.func8","library_frame":true,"module":"go.elastic.co/apm/module/apmhttp/v2"},{"filename":"transport.go","lineno":2272,"abs_path":"/usr/local/go/src/net/http/transport.go","function":"(*persistConn).readResponse","library_frame":true,"module":"net/http"},{"filename":"transport.go","lineno":2102,"abs_path":"/usr/local/go/src/net/http/transport.go","function":"(*persistConn).readLoop","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}],"subtype":"http","transaction_id":"939cf5cf0f02477f"}}
{"span":{"duration":0.62075,"id":"1c4085084c394e92","name":"Response","timestamp":1646055458722604,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"external","action":"response","outcome":"success","parent_id":"d026dc7ec2576951","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"939cf5cf0f02477f"}}
{"span":{"duration":5425.526461,"id":"d026dc7ec2576951","name":"GET opbeans-python:3000","timestamp":1646055453297700,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"external","context":{"destination":{"address":"opbeans-python","port":3000,"service":{"name":"http://opbeans-python:3000","resource":"opbeans-python:3000","type":"external"}},"http":{"url":"http://opbeans-python:3000/api/orders","status_code":200}},"outcome":"success","parent_id":"939cf5cf0f02477f","sample_rate":1,"stacktrace":[{"filename":"span.go","lineno":368,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/v2@v2.0.0-20220125052152-dbce0fc5646c/span.go","function":"(*Span).End","library_frame":true,"module":"go.elastic.co/apm/v2"},{"filename":"client.go","lineno":198,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmhttp/v2@v2.0.0-20220125052152-dbce0fc5646c/client.go","function":"(*responseBody).endSpan","library_frame":true,"module":"go.elastic.co/apm/module/apmhttp/v2"},{"filename":"client.go","lineno":187,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmhttp/v2@v2.0.0-20220125052152-dbce0fc5646c/client.go","function":"(*responseBody).Read","library_frame":true,"module":"go.elastic.co/apm/module/apmhttp/v2"},{"filename":"reverseproxy.go","lineno":461,"abs_path":"/usr/local/go/src/net/http/httputil/reverseproxy.go","function":"(*ReverseProxy).copyBuffer","library_frame":true,"module":"net/http/httputil"},{"filename":"reverseproxy.go","lineno":449,"abs_path":"/usr/local/go/src/net/http/httputil/reverseproxy.go","function":"(*ReverseProxy).copyResponse","library_frame":true,"module":"net/http/httputil"},{"filename":"reverseproxy.go","lineno":338,"abs_path":"/usr/local/go/src/net/http/httputil/reverseproxy.go","function":"(*ReverseProxy).ServeHTTP","library_frame":true,"module":"net/http/httputil"},{"filename":"main.go","lineno":196,"abs_path":"/src/opbeans-go/main.go","function":"Main.func2","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"main.go","lineno":174,"abs_path":"/src/opbeans-go/main.go","function":"Main.func1","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"logger.go","lineno":36,"abs_path":"/src/opbeans-go/logger.go","function":"logrusMiddleware","module":"main"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"middleware.go","lineno":104,"abs_path":"/go/pkg/mod/github.com/elastic/apm-agent-go/module/apmgin/v2@v2.0.0-20220125052152-dbce0fc5646c/middleware.go","function":"(*middleware).handle","library_frame":true,"module":"go.elastic.co/apm/module/apmgin/v2"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"cache.go","lineno":128,"abs_path":"/go/pkg/mod/github.com/gin-contrib/cache@v1.1.0/cache.go","function":"Cache.func1","library_frame":true,"module":"github.com/gin-contrib/cache"},{"filename":"context.go","lineno":168,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go","function":"(*Context).Next","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":555,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).handleHTTPRequest","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"gin.go","lineno":511,"abs_path":"/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go","function":"(*Engine).ServeHTTP","library_frame":true,"module":"github.com/gin-gonic/gin"},{"filename":"server.go","lineno":2879,"abs_path":"/usr/local/go/src/net/http/server.go","function":"serverHandler.ServeHTTP","library_frame":true,"module":"net/http"},{"filename":"server.go","lineno":1930,"abs_path":"/usr/local/go/src/net/http/server.go","function":"(*conn).serve","library_frame":true,"module":"net/http"},{"filename":"asm_arm64.s","lineno":1133,"abs_path":"/usr/local/go/src/runtime/asm_arm64.s","function":"goexit","library_frame":true,"module":"runtime"}],"subtype":"http","transaction_id":"939cf5cf0f02477f"}}
{"transaction":{"duration":5426.059503,"id":"939cf5cf0f02477f","name":"GET /api/orders","span_count":{"dropped":0,"started":5},"timestamp":1646055453297483,"trace_id":"939cf5cf0f02477face9fe243f8e1250","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"headers":{"Vary":"Cookie","Referrer-Policy":"same-origin","Server":"gunicorn","Date":"Mon, 28 Feb 2022 13:37:38 GMT","Content-Type":"application/json","X-Frame-Options":"DENY","Content-Length":"108580","X-Content-Type-Options":"nosniff"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","result":"HTTP 2xx","sample_rate":1}}
{"metricset":{"samples":{"span.self_time.count":{"value":2},"span.self_time.sum.us":{"value":3219.000000042}},"timestamp":1646055462723469,"span":{"subtype":"postgresql","type":"db"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":1},"span.self_time.sum.us":{"value":8346.000000208}},"timestamp":1646055462723469,"span":{"type":"app"},"transaction":{"name":"GET /api/stats","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":4},"span.self_time.sum.us":{"value":12807.000000834}},"timestamp":1646055462723469,"span":{"subtype":"postgresql","type":"db"},"transaction":{"name":"GET /api/stats","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":5},"span.self_time.sum.us":{"value":5.425526000000461e+06}},"timestamp":1646055462723469,"span":{"subtype":"http","type":"external"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"span.self_time.count":{"value":3},"span.self_time.sum.us":{"value":16747.000000459}},"timestamp":1646055462723469,"span":{"type":"app"},"transaction":{"name":"GET /api/orders","type":"request"}}}
{"metricset":{"samples":{"system.memory.total":{"value":1.2544401408e+10},"golang.heap.allocations.mallocs":{"value":67354},"golang.heap.allocations.frees":{"value":36071},"golang.heap.allocations.total":{"value":9.880784e+06},"golang.heap.system.total":{"value":2.0005896e+07},"golang.heap.system.obtained":{"value":1.1993088e+07},"golang.goroutines":{"value":11},"system.cpu.total.norm.pct":{"value":0.9246592954487015},"system.process.memory.size":{"value":1.265262592e+09},"system.process.memory.rss.bytes":{"value":2.0901888e+07},"golang.heap.allocations.allocated":{"value":7.64328e+06},"golang.heap.system.released":{"value":2.392064e+06},"system.process.cpu.total.norm.pct":{"value":0.0005142710208279763},"golang.heap.allocations.objects":{"value":31283},"golang.heap.allocations.idle":{"value":2.531328e+06},"golang.heap.system.stack":{"value":589824},"golang.heap.gc.total_pause.ns":{"value":3.18371e+06},"system.memory.actual.free":{"value":7.93065472e+09},"golang.heap.allocations.active":{"value":9.46176e+06},"golang.heap.gc.next_gc_limit":{"value":9.7284e+06},"golang.heap.gc.total_count":{"value":3},"golang.heap.gc.cpu_fraction":{"value":0.0003350751466635942}},"timestamp":1646055462723469}}
{"span":{"duration":2.0115,"id":"3bad2ceddd53c746","name":"SELECT FROM orders","timestamp":1646055466288825,"trace_id":"379b8f8b2c1ebcec0025bd8da44d7aba","type":"db","action":"query","context":{"db":{"statement":"SELECT\n  orders.id, orders.created_at,\n  customers.id, customers.full_name\nFROM orders JOIN customers ON orders.customer_id=customers.id\nLIMIT 1000\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"379b8f8b2c1ebcec","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"379b8f8b2c1ebcec"}}
{"transaction":{"duration":5.897459,"id":"379b8f8b2c1ebcec","name":"GET /api/orders","span_count":{"dropped":0,"started":1},"timestamp":1646055466288751,"trace_id":"379b8f8b2c1ebcec0025bd8da44d7aba","type":"request","context":{"request":{"method":"GET","url":{"hostname":"localhost","pathname":"/api/orders","port":"3000","protocol":"http","full":"http://localhost:3000/api/orders"},"headers":{"User-Agent":"Go-http-client/1.1","Accept-Encoding":"gzip"},"http_version":"1.1","socket":{"remote_address":"127.0.0.1"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":3.199291,"id":"da3677392e4f9699","name":"SELECT FROM products","timestamp":1646055470515500,"trace_id":"418823839120a4f38d3c233687223640","type":"db","action":"query","context":{"db":{"statement":"SELECT\n\t  id, sku, name, stock, SUM(order_lines.amount) AS sold\nFROM products JOIN order_lines ON id=product_id GROUP BY products.id ORDER BY sold DESC\nLIMIT 3\n","type":"sql","user":"postgres"},"destination":{"address":"postgres","port":5432,"service":{"name":"postgresql","resource":"postgresql","type":"db"}}},"outcome":"success","parent_id":"3887ae4c8a6ecc2d","sample_rate":1,"stacktrace":[],"subtype":"postgresql","transaction_id":"3887ae4c8a6ecc2d"}}
{"transaction":{"duration":5.485167,"id":"3887ae4c8a6ecc2d","name":"GET /api/products/:id","span_count":{"dropped":0,"started":1},"timestamp":1646055470515334,"trace_id":"418823839120a4f38d3c233687223640","type":"request","context":{"request":{"method":"GET","url":{"hostname":"opbeans-go","pathname":"/api/products/top","port":"3000","protocol":"http","full":"http://opbeans-go:3000/api/products/top"},"headers":{"Traceparent":"00-418823839120a4f38d3c233687223640-4f966299636a6858-01","Tracestate":"es=s:1","Elastic-Apm-Traceparent":"00-418823839120a4f38d3c233687223640-4f966299636a6858-01","Connection":"close"},"http_version":"1.1","socket":{"remote_address":"172.23.0.10"}},"response":{"headers":{"Content-Type":"application/json; charset=utf-8"},"status_code":200},"service":{"framework":{"name":"gin","version":"v1.7.7"}}},"outcome":"success","parent_id":"4f966299636a6858","result":"HTTP 2xx","sample_rate":1}}
{"span":{"duration":1.2537500000000001,"id":"b15f8e61dfe0356b","name":"DNS opbeans-ruby","timestamp":1646055470917619,"trace_id":"9de92b203e3f8f3a5c7e08afc337a170","type":"external","action":"dns","outcome":"success","parent_id":"ab3006fa0db6151a","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"06780dc259fef4d6"}}
{"span":{"duration":0.188833,"id":"9696dabb60fd8ea6","name":"Connect 172.23.0.12:3000","timestamp":1646055470918881,"trace_id":"9de92b203e3f8f3a5c7e08afc337a170","type":"external","action":"connect","outcome":"failure","parent_id":"ab3006fa0db6151a","sample_rate":1,"stacktrace":[],"subtype":"http","transaction_id":"06780dc259fef4d6"}}
